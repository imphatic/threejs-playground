<html>
<head>
    <style>
        body { margin: 0; }
        canvas { width: 100%; height: 100% }
    </style>
</head>
<body>
<script src="js/three.js"></script>

<script>
    var scene, camera, renderer;

    var WIDTH  = window.innerWidth;
    var HEIGHT = window.innerHeight;

    var SPEED = 0.01;

    function init() {
        scene = new THREE.Scene();

        initMesh();
        initCamera();
        initLights();
        initRenderer();

        document.body.appendChild(renderer.domElement);
    }

    function initCamera() {
        camera = new THREE.PerspectiveCamera(70, WIDTH / HEIGHT, 1, 10);
        camera.position.set(0, 3.5, 5);
        camera.lookAt(scene.position);
    }


    function initRenderer() {
        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(WIDTH, HEIGHT);
    }

    function initLights() {
        var light = new THREE.AmbientLight(0xffffff);
        scene.add(light);
    }

    var mesh = null;
    function initMesh() {
        var loader = new THREE.JSONLoader();
        loader.load('objects/cube.json', function(geometry, materials) {
            mesh = new THREE.Mesh(geometry, new THREE.MultiMaterial(materials));
            mesh.scale.x = mesh.scale.y = mesh.scale.z = 0.75;
            mesh.translation = geometry.center();
            scene.add(mesh);
        });
    }

    function rotateMesh() {
        if (!mesh) {
            return;
        }

        mesh.rotation.x -= SPEED * 2;
        mesh.rotation.y -= SPEED;
        mesh.rotation.z -= SPEED * 3;
    }

    function render() {
        requestAnimationFrame(render);
        rotateMesh();
        renderer.render(scene, camera);
    }

    init();
    render();

</script>
</body>
</html>